# typescript를 사용하는 과제 프로젝트!
 
과제 : 존재하는 사이트의 일부분을 클론코딩하기
 -
[구경하러 가기]( https://matty255.github.io/clonecodinghouse/)

기술스택
  -
- react
- typescript
- redux toolkit
- file-saver
- eslint
- react-slick
- tailwindcss
- tailwind-styled-components
- sweetalert2


갤러리
  - 
- 카드는 줄당 4~5개로 고정, 이미지가 깨지지 않게 비율을 맞춰 그리드 + 플렉스 ✅ 
- 동적배열로 불러오되 끝부분에 숫자가 맞지 않으면 왼쪽 정렬 ✅ 
- 각 카드에 호버시 체크박스와 작은 드롭다운(개별 삭제와 개별 다운로드)을 볼 수 있게 ✅ 
  - 체크박스는 평소에는 호버시에만 / 체크된 상태일때는 그냥 보이고 드롭다운은 어떤 경우라도 감춰지게 ✅ 
  - 체크박스와 드롭다운아이콘 또한 반응형에 맞추어 제작 ✅
  - 체크박스 관련 옵션
    - 모든 체크박스가 체크되지 않았을 경우 상단바 - 전체 그림이 몇개인지 알려주기 ✅ 
    - 체크박스가 하나라도 체크된 경우 상단바 - 선택된 그림이 몇개인지 보여주고 상단에 버튼들 띄우기 ✅ 
      - 다운로드 : 체크된 그림들을 다운로드 ✅ 
      - 삭제 : 체크된 그림들을 삭제 ✅ 
      - 전체선택 : 체크박스 형태 인풋으로 인풋을 한번 더 눌러도 전체선택이 취소됨 ✅ 
      - 전체선택 취소 : 텍스트로 되어있는 버튼으로 취소 기능만 있음 ✅ 
- 기타 호버시 애니메이션, 트랜지션, 테마컬러(민트) 적용하기 ✅
- 삭제버튼 클릭시 gif가 들어간 모달 띄우기 : 체크박스 선택한 갯수만큼 나타내주기 ✅
  - 삭제나 다운로드 클릭했을 때 체크 여부 초기화하기✅

상세페이지
  -
- 카드를 클릭하면 상세페이지에서 큰 스크린 + 원본비율로 상세페이지 슬라이드 ✅ 
- 슬라이드의 시작위치는 각 카드이며 전환시 animation은 없음으로 설정 ✅ 
- 주소를 부여하지 않고 풀스크린 모달로 소환하기 ✅ 
- 상세페이지에는 체크박스가 없게 ✅ 
- 개별 슬라이드 상단에 표시되는 다운로드는 아이콘+버튼 / 삭제버튼은 아이콘만 보이게 ✅ 
- 슬라이드 arrow 커스텀하기 ✅
- 기타 호버시 애니메이션, 트랜지션, 테마컬러(민트) 적용하기 ✅
- 삭제버튼 클릭시 gif가 들어간 모달 띄우기 : 정말 삭제하시겠어요만 띄워주기 ✅


트러블슈팅 정리
  -
갤러리페이지 - 체크박스
 - 열심히 체크박스 기능 구현 후 마지막으로 호버시 회색으로 살짝 덮어주는 이벤트를 주고나자 체크박스가 클릭이 되지 않는 문제가 발생하였습니다.
 - 원인 : 이벤트 영역이 겹침(카드에 체크박스 토글, 전체영역 호버, 전체영역 온클릭, 드롭다운까지 총 4개의 이벤트)
 - 접근 : 부모div = 회색에서 이벤트 버블링을 막아주었습니다.
 - 발생한 문제 : 회색에서 이벤트를 막자 그 내부에서 발생한 모달 관련 인터랙션도 먹통이 되어 슬라이드의 개별 다운로드 버튼이 눌리지 않는 현상 발생!
 - 해결 : 버튼을 상위 컴포넌트로 올린 후 전체를 덮고 있던 헤더를 떼어내어 컴포넌트의 구조를 간소화하였습니다.
 
 
상세페이지 - 슬라이드
  - 전체 페이지를 슬라이드 형태로 이어지게 만들어야 하는데 각 카드를 클릭했을 때 슬라이드의 시작위치가 그 카드의 인덱스부터 시작해야 했습니다.
  - 선택한 방법 : react-slick의 initialSlide값에 연결되는 setstate값을 하나 설정해주었습니다.
  
  - 발생한 문제 : setstate로 초기 슬라이드를 정하는데엔 성공했지만 이전 다음버튼을 누르는 순간 0번인덱스의 다음인 1번인덱스로 돌아가버리는 현상 발생
  
  - 접근 : react-slick 공식문서와 stack-overflow를 보고 1.4버전 이후에 생겼다는 .slickGoTo 메소드를 이용하기로 하였습니다,
    원래 있던 화살표를 완전히 감추고 화살표 기능도 .next, .prev가 아닌 .slickGoTo로 완전히 대체하여 어디서 시작되더라도 이전과 다음으로 이동할 수 있게 했습니다.

  - 발생한 문제 : .slickGoTo를 사용해서 발생한 문제들
      1. 최초 로드후 화살표를 한번 클릭하면 아직 ref의 current가 정의되지 않아 카운트만 올라가고 슬라이드가 움직이지 않는 문제 발생
      2. 다운로드 / 삭제시에 setstate값에 지정한 slideIndex를 사용해서 forEach 문으로 비교했는데 slickGoTo를 이용하자 1칸 뒤의 인덱스 값을 가져오는 문제 발생
      3. 개별 파일 삭제시(슬라이드에서 + 바깥 메인페이지에서) 미리 지정했던 index값이 틀어지는 문제 발생
     
  - 해결
    - 슬라이드 내부에서만 돌아가는 배열을 하나 더 빼서 인덱스가 순서대로 배치되게 하고,
    - 함수에 current가 정의되지 않았을때, slideIndex가 다음값을 미리 가져다놓아 생긴 불일치를 커버할 수 있는 분기들을 추가했습니다. 
    - 좀더 생각하면 더 좋은 방법이 있을 것 같은데... 
 
  - 해결하지 못한 문제 : 
    슬라이드의 방향을 급하게 전환할때 인덱스가 뒤로 한번 갔다가 다시 앞으로 가는 현상이 발생하고 있습니다. 다운로드와 삭제는 각 슬라이드에 제대로 연결되어 있지만 이동시 약간의 딜레이가 발생하고 있습니다...
